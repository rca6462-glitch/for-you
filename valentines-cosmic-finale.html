<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Valentine's Day ‚ù§Ô∏è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #FFB6C1 0%, #FFC0CB 50%, #FFB6D9 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            padding: 20px 0;
        }

        /* Cute pattern overlay */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(255, 182, 193, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 192, 203, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(255, 182, 217, 0.3) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        /* Hello Kitty bow decorations */
        body::after {
            content: 'üéÄ';
            position: fixed;
            font-size: 60px;
            top: 20px;
            right: 30px;
            opacity: 0.4;
            z-index: 1;
            animation: gentleBounce 3s infinite;
        }

        @keyframes gentleBounce {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-10px) rotate(5deg);
            }
        }

        .hearts-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .heart {
            position: absolute;
            width: 20px;
            height: 20px;
            background: rgba(255, 105, 180, 0.7);
            transform: rotate(45deg);
            animation: float 6s infinite;
            filter: drop-shadow(0 0 3px rgba(255, 192, 203, 0.8));
        }

        .heart::before,
        .heart::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: rgba(255, 105, 180, 0.7);
            border-radius: 50%;
        }

        .heart::before {
            top: -10px;
            left: 0;
        }

        .heart::after {
            left: 10px;
            top: 0;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(45deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(45deg);
                opacity: 0;
            }
        }

        .container {
            background: rgba(255, 255, 255, 0.98);
            padding: 50px 40px;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(255, 182, 193, 0.4), 0 0 0 3px rgba(255, 192, 203, 0.3);
            text-align: center;
            max-width: 800px;
            width: 90%;
            position: relative;
            z-index: 10;
            margin: 0 auto 30px;
            border: 4px solid rgba(255, 182, 193, 0.5);
        }

        /* Cute decorative corners */
        .container::before {
            content: 'üå∏';
            position: absolute;
            top: 15px;
            left: 15px;
            font-size: 30px;
            opacity: 0.6;
        }

        .container::after {
            content: 'üå∏';
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 30px;
            opacity: 0.6;
        }

        h1 {
            color: #FF69B4;
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(255, 182, 193, 0.5);
        }

        h2 {
            color: #FF69B4;
            font-size: 2em;
            margin: 30px 0 20px;
        }

        .subtitle {
            color: #FF1493;
            font-size: 1.2em;
            margin-bottom: 30px;
            font-style: italic;
        }

        /* Sections as Full Pages */
        .section {
            display: none;
            min-height: 400px;
            opacity: 0;
            transform: scale(0.95);
            transition: opacity 1s ease, transform 1s ease;
        }

        .section.active {
            display: block;
            animation: romanticFadeIn 1.5s ease forwards;
        }

        .section.fadeOut {
            animation: romanticFadeOut 1s ease forwards;
        }

        @keyframes romanticFadeIn {
            0% {
                opacity: 0;
                transform: scale(0.9) translateY(30px);
            }
            50% {
                opacity: 0.5;
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        @keyframes romanticFadeOut {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(1.05);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Quote Carousel */
        .quote-carousel {
            background: linear-gradient(135deg, #FFF0F5, #FFE4F0);
            padding: 40px;
            border-radius: 20px;
            margin: 20px 0;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(255, 182, 193, 0.3);
            border: 3px solid rgba(255, 192, 203, 0.4);
        }

        .quote-text {
            font-size: 1.4em;
            color: #333;
            font-style: italic;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .quote-author {
            font-size: 1.1em;
            color: #FF69B4;
            font-weight: bold;
        }

        .carousel-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .carousel-btn {
            background: linear-gradient(135deg, #FF69B4, #FF1493);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.3);
        }

        .carousel-btn:hover {
            background: linear-gradient(135deg, #FF1493, #C71585);
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255, 105, 180, 0.5);
        }

        /* Proposal Section */
        .proposal-box {
            background: linear-gradient(135deg, #FFF0F5, #FFE4E9);
            padding: 40px;
            border-radius: 20px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(255, 182, 193, 0.3);
            border: 3px solid rgba(255, 192, 203, 0.4);
        }

        .proposal-message {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 30px;
            line-height: 1.8;
        }

        .ring {
            width: 80px;
            height: 80px;
            border: 8px solid #FFD700;
            border-radius: 50%;
            margin: 30px auto;
            position: relative;
            animation: sparkle 2s infinite;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }

        .ring::before {
            content: 'üíé';
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2em;
            filter: drop-shadow(0 0 10px rgba(255, 192, 203, 0.8));
        }

        @keyframes sparkle {
            0%, 100% {
                box-shadow: 0 0 20px #FFD700, 0 0 30px rgba(255, 192, 203, 0.5);
            }
            50% {
                box-shadow: 0 0 40px #FFD700, 0 0 60px rgba(255, 192, 203, 0.8);
            }
        }

        .proposal-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .yes-btn {
            background: linear-gradient(135deg, #FF69B4, #FF1493);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.4);
        }

        .yes-btn:hover {
            transform: translateY(-2px) scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 105, 180, 0.6);
            background: linear-gradient(135deg, #FF1493, #C71585);
        }

        .no-btn {
            background: linear-gradient(135deg, #FFB6C1, #FFC0CB);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 182, 193, 0.4);
        }

        .no-btn:hover {
            background: linear-gradient(135deg, #FFC0CB, #FFB6D9);
            transform: translateY(-2px);
        }

        /* Quiz Section */
        .quiz-container {
            background: linear-gradient(135deg, #FFF0F5, #FFE4F0);
            padding: 30px;
            border-radius: 20px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(255, 182, 193, 0.3);
            border: 3px solid rgba(255, 192, 203, 0.4);
        }

        .question {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .answers {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .answer-btn {
            background: white;
            color: #333;
            padding: 15px 20px;
            border: 3px solid #FFB6C1;
            border-radius: 15px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            box-shadow: 0 3px 10px rgba(255, 182, 193, 0.2);
        }

        .answer-btn:hover {
            background: #FFF0F5;
            transform: translateX(10px);
            border-color: #FF69B4;
            box-shadow: 0 5px 15px rgba(255, 105, 180, 0.3);
        }

        .answer-btn.correct {
            background: #FFE4F0;
            border-color: #FF69B4;
            box-shadow: 0 0 20px rgba(255, 105, 180, 0.5);
        }

        .answer-btn.wrong {
            background: #FFF0F5;
            border-color: #FFB6C1;
        }

        .quiz-score {
            font-size: 1.5em;
            color: #FF69B4;
            margin-top: 20px;
            font-weight: bold;
        }

        .quiz-result {
            background: linear-gradient(135deg, #FFF0F5, #FFE4F0);
            padding: 30px;
            border-radius: 15px;
            margin-top: 20px;
            border: 3px solid rgba(255, 192, 203, 0.4);
        }

        .next-question-btn {
            background: linear-gradient(135deg, #FF69B4, #FF1493);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.4);
        }

        .next-question-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 105, 180, 0.6);
        }

        /* Anniversary Section */
        .anniversary-box {
            background: linear-gradient(135deg, #FFF0F5, #FFE4F0);
            padding: 40px;
            border-radius: 20px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(255, 182, 193, 0.3);
            border: 3px solid rgba(255, 192, 203, 0.4);
        }

        .anniversary-message {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 30px;
            line-height: 1.8;
        }

        .date-display {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 5px 20px rgba(255, 105, 180, 0.3);
            border: 3px solid rgba(255, 192, 203, 0.5);
        }

        .special-date {
            font-size: 3em;
            color: #FF69B4;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(255, 182, 193, 0.4);
            margin-bottom: 10px;
        }

        .date-label {
            font-size: 1.3em;
            color: #FF1493;
            font-style: italic;
        }

        .hearts-row {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            font-size: 2em;
        }

        .floating-emoji {
            animation: bounce 2s infinite;
            display: inline-block;
        }

        .floating-emoji:nth-child(2) {
            animation-delay: 0.2s;
        }

        .floating-emoji:nth-child(3) {
            animation-delay: 0.4s;
        }

        .floating-emoji:nth-child(4) {
            animation-delay: 0.6s;
        }

        .floating-emoji:nth-child(5) {
            animation-delay: 0.8s;
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-20px);
            }
        }

        .time-together {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .countdown-display {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .time-unit {
            background: linear-gradient(135deg, #FF69B4, #FF1493);
            padding: 20px;
            border-radius: 15px;
            min-width: 100px;
            color: white;
            box-shadow: 0 5px 15px rgba(255, 105, 180, 0.4);
        }

        .time-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .time-label-small {
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Cosmic Heart Finale Section */
        #cosmic-finale {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #010103;
            z-index: 9999;
            display: none;
        }

        #cosmic-finale.active {
            display: block;
        }

        #cosmic-finale canvas {
            display: block;
        }

        #cosmic-ui {
            position: absolute;
            bottom: 30px;
            width: 100%;
            text-align: center;
            color: rgba(255, 255, 255, 0.5);
            pointer-events: none;
            font-size: 0.9rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
            transition: opacity 1s;
        }

        #cosmic-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 1.5rem;
        }

        .floating-text {
            position: absolute;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            pointer-events: none;
            text-shadow: 0 0 10px rgba(255, 0, 85, 0.6), 0 0 20px rgba(255, 0, 85, 0.3);
            font-family: 'Georgia', serif;
            animation: floatUp 3s ease-out forwards;
            z-index: 10000;
        }

        @keyframes floatUp {
            0% {
                opacity: 1;
                transform: translateY(0);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px);
            }
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 2em;
            }
            
            .quote-text {
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <div class="hearts-background" id="heartsContainer"></div>
    
    <div class="container">
        <h1>Happy Valentine's Day! üíï</h1>
        <p class="subtitle">Love, Romance & Sweet Surprises</p>
        
        <!-- Proposal Section -->
        <div id="proposal" class="section active">
            <h2>A Special Question üíç</h2>
            <div class="proposal-box">
                <p class="proposal-message">
                    In a world full of temporary things, you are a perpetual feeling. 
                    Every sunrise is more beautiful because I get to share it with you. 
                    Every challenge is easier because we face it together. 
                    You are my best friend, my partner, my everything.
                </p>
                <div class="ring"></div>
                <p class="proposal-message" style="font-size: 1.5em; font-weight: bold; color: #e74c3c;">
                    Will you be my Valentine... forever? üíï
                </p>
                <div class="proposal-buttons">
                    <button class="yes-btn" onclick="answerProposal('yes')">YES! üíñ</button>
                    <button class="no-btn" onclick="answerProposal('no')">Not Yet</button>
                </div>
            </div>
        </div>

        <!-- Anniversary Section -->
        <div id="anniversary" class="section">
            <h2>Our Love Story üíë</h2>
            <div class="anniversary-box">
                <p class="anniversary-message">
                    It all began on a day that changed everything...
                </p>
                <div class="date-display">
                    <div class="special-date">10/10/2025</div>
                    <p class="date-label">The Day We Started Dating</p>
                </div>
                <div class="hearts-row">
                    <span class="floating-emoji">üíï</span>
                    <span class="floating-emoji">üíñ</span>
                    <span class="floating-emoji">üíó</span>
                    <span class="floating-emoji">üíù</span>
                    <span class="floating-emoji">üíò</span>
                </div>
                <div class="time-together">
                    <h3 style="color: #e74c3c; margin-bottom: 20px;">Time Together</h3>
                    <div class="countdown-display">
                        <div class="time-unit">
                            <div class="time-number" id="months">0</div>
                            <div class="time-label-small">Months</div>
                        </div>
                        <div class="time-unit">
                            <div class="time-number" id="days">0</div>
                            <div class="time-label-small">Days</div>
                        </div>
                        <div class="time-unit">
                            <div class="time-number" id="hours">0</div>
                            <div class="time-label-small">Hours</div>
                        </div>
                        <div class="time-unit">
                            <div class="time-number" id="minutes">0</div>
                            <div class="time-label-small">Minutes</div>
                        </div>
                    </div>
                </div>
                <p class="anniversary-message" style="margin-top: 30px; font-style: italic;">
                    Every moment with you has been a beautiful chapter in our story. 
                    From that first day to this very moment, my love for you has only grown stronger. 
                    Here's to all the memories we've made and all the adventures yet to come. ‚ù§Ô∏è
                </p>
                <button class="yes-btn" style="margin-top: 30px;" onclick="nextPage('anniversary', 'quotes')">Continue Our Journey üíï</button>
            </div>
        </div>

        <!-- Quotes Section -->
        <div id="quotes" class="section">
            <h2>Love Quotes Collection üíï</h2>
            <div class="quote-carousel">
                <div class="quote-text" id="quoteText"></div>
                <div class="quote-author" id="quoteAuthor"></div>
            </div>
            <div class="carousel-controls">
                <button class="carousel-btn" onclick="previousQuote()">‚Üê Previous</button>
                <button class="carousel-btn" onclick="nextQuote()">Next ‚Üí</button>
            </div>
            <button class="yes-btn" style="margin-top: 30px;" onclick="nextPage('quotes', 'quiz')">Take the Love Quiz üíñ</button>
        </div>

        <!-- Quiz Section -->
        <div id="quiz" class="section">
            <h2>Romantic Love Quiz ‚ù§Ô∏è</h2>
            <p style="color: #666; margin-bottom: 20px;">How well do you know the language of love?</p>
            <div class="quiz-container">
                <div id="quizQuestion" class="question"></div>
                <div id="quizAnswers" class="answers"></div>
                <div id="quizFeedback"></div>
                <div id="quizScore" class="quiz-score"></div>
            </div>
        </div>
    </div>

    <!-- Cosmic Heart Finale -->
    <div id="cosmic-finale">
        <div id="cosmic-loading">Loading...</div>
        <div id="cosmic-ui">Touch the Galaxy</div>
    </div>

    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
    }
    </script>

    <script>
        // Floating hearts
        function createHeart() {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (Math.random() * 3 + 4) + 's';
            heart.style.animationDelay = Math.random() * 2 + 's';
            document.getElementById('heartsContainer').appendChild(heart);
            setTimeout(() => heart.remove(), 8000);
        }
        setInterval(createHeart, 300);

        // Next Page Function with Romantic Transition
        function nextPage(currentPage, nextPageId) {
            const current = document.getElementById(currentPage);
            const next = document.getElementById(nextPageId);
            
            // Add fade out animation to current page
            current.classList.add('fadeOut');
            
            // Create extra hearts during transition
            for (let i = 0; i < 30; i++) {
                setTimeout(createHeart, i * 30);
            }
            
            // Wait for fade out, then switch pages
            setTimeout(() => {
                current.classList.remove('active', 'fadeOut');
                next.classList.add('active');
                
                // Initialize quiz if going to quiz page
                if (nextPageId === 'quiz') {
                    startQuiz();
                }
                
                // Update countdown if going to anniversary
                if (nextPageId === 'anniversary') {
                    updateCountdown();
                }
            }, 1000);
        }
        
        // Initialize on page load
        window.onload = function() {
            displayQuote();
        };

        // Anniversary Countdown
        function updateCountdown() {
            const startDate = new Date('2025-10-10T00:00:00');
            const now = new Date();
            const diff = now - startDate;
            
            const totalDays = Math.floor(diff / (1000 * 60 * 60 * 24));
            const months = Math.floor(totalDays / 30);
            const days = totalDays % 30;
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            document.getElementById('months').textContent = months;
            document.getElementById('days').textContent = days;
            document.getElementById('hours').textContent = hours;
            document.getElementById('minutes').textContent = minutes;
        }

        // Update countdown every minute
        setInterval(updateCountdown, 60000);

        // Quotes Carousel
        const quotes = [
            { text: "Love is composed of a single soul inhabiting two bodies.", author: "Aristotle" },
            { text: "The best thing to hold onto in life is each other.", author: "Audrey Hepburn" },
            { text: "Where there is love, there is life.", author: "Mahatma Gandhi" },
            { text: "Love is friendship set on fire.", author: "Jeremy Taylor" },
            { text: "To love and be loved is to feel the sun from both sides.", author: "David Viscott" },
            { text: "You know you're in love when you can't fall asleep because reality is finally better than your dreams.", author: "Dr. Seuss" },
            { text: "Love is not about how many days, months, or years you have been together. Love is about how much you love each other every single day.", author: "Unknown" },
            { text: "I love you not only for what you are, but for what I am when I am with you.", author: "Roy Croft" },
            { text: "The greatest happiness of life is the conviction that we are loved.", author: "Victor Hugo" },
            { text: "Love recognizes no barriers. It jumps hurdles, leaps fences, penetrates walls to arrive at its destination full of hope.", author: "Maya Angelou" },
            { text: "Being deeply loved by someone gives you strength, while loving someone deeply gives you courage.", author: "Lao Tzu" },
            { text: "Love is when the other person's happiness is more important than your own.", author: "H. Jackson Brown Jr." }
        ];

        let currentQuoteIndex = 0;

        function displayQuote() {
            document.getElementById('quoteText').textContent = `"${quotes[currentQuoteIndex].text}"`;
            document.getElementById('quoteAuthor').textContent = `‚Äî ${quotes[currentQuoteIndex].author}`;
        }

        function nextQuote() {
            currentQuoteIndex = (currentQuoteIndex + 1) % quotes.length;
            displayQuote();
        }

        function previousQuote() {
            currentQuoteIndex = (currentQuoteIndex - 1 + quotes.length) % quotes.length;
            displayQuote();
        }

        // Proposal
        function answerProposal(answer) {
            if (answer === 'yes') {
                // Celebration effect
                for (let i = 0; i < 50; i++) {
                    setTimeout(createHeart, i * 50);
                }
                
                // Show sweet message
                alert("üéâ YES! This is the best Valentine's Day ever! You've made me the happiest person alive! üíïüíç‚ú®");
                
                // Transition to next page with romantic animation
                setTimeout(() => {
                    nextPage('proposal', 'anniversary');
                }, 1500);
            } else {
                alert("That's okay! Take all the time you need. My love will always be here waiting. ‚ù§Ô∏è");
            }
        }

        // Quiz
        const quizQuestions = [
            {
                question: "What makes a relationship truly special?",
                answers: ["Expensive gifts", "Trust and communication", "Social media posts", "Perfect appearance"],
                correct: 1
            },
            {
                question: "What's the most important thing in a relationship?",
                answers: ["Money", "Looks", "Mutual respect and love", "Having the same hobbies"],
                correct: 2
            },
            {
                question: "How should you handle disagreements with your partner?",
                answers: ["Ignore them", "Communicate openly and calmly", "Give the silent treatment", "Always agree to avoid conflict"],
                correct: 1
            },
            {
                question: "What does true love mean?",
                answers: ["Never arguing", "Accepting each other's flaws and growing together", "Always being together 24/7", "Changing yourself completely for the other person"],
                correct: 1
            },
            {
                question: "What's the best way to show someone you love them?",
                answers: ["Through consistent actions and words", "Only on special occasions", "Buying expensive things", "Just saying 'I love you' once"],
                correct: 0
            },
            {
                question: "What keeps the spark alive in a long-term relationship?",
                answers: ["Routine only", "Effort, surprises, and quality time together", "Comparing to other couples", "Taking each other for granted"],
                correct: 1
            },
            {
                question: "How important is it to maintain your own identity in a relationship?",
                answers: ["Not important, you should merge completely", "Very important, healthy relationships need two whole individuals", "You should only focus on your partner", "Identity doesn't matter in love"],
                correct: 1
            },
            {
                question: "What's the foundation of lasting love?",
                answers: ["Physical attraction only", "Friendship, trust, and commitment", "Financial stability alone", "Having no differences"],
                correct: 1
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let answered = false;

        function startQuiz() {
            currentQuestion = 0;
            score = 0;
            answered = false;
            displayQuestion();
        }

        function displayQuestion() {
            answered = false;
            const question = quizQuestions[currentQuestion];
            document.getElementById('quizQuestion').textContent = `Question ${currentQuestion + 1}/${quizQuestions.length}: ${question.question}`;
            
            const answersDiv = document.getElementById('quizAnswers');
            answersDiv.innerHTML = '';
            
            question.answers.forEach((answer, index) => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.textContent = answer;
                btn.onclick = () => checkAnswer(index);
                answersDiv.appendChild(btn);
            });
            
            document.getElementById('quizFeedback').innerHTML = '';
            document.getElementById('quizScore').textContent = `Score: ${score}/${quizQuestions.length}`;
        }

        function checkAnswer(selectedIndex) {
            if (answered) return;
            answered = true;
            
            const question = quizQuestions[currentQuestion];
            const buttons = document.querySelectorAll('.answer-btn');
            
            buttons.forEach((btn, index) => {
                if (index === question.correct) {
                    btn.classList.add('correct');
                } else if (index === selectedIndex) {
                    btn.classList.add('wrong');
                }
                btn.style.pointerEvents = 'none';
            });
            
            if (selectedIndex === question.correct) {
                score++;
                document.getElementById('quizFeedback').innerHTML = `
                    <div class="quiz-result">
                        <p style="color: #28a745; font-size: 1.3em; font-weight: bold;">‚úì Correct! üéâ</p>
                    </div>
                `;
            } else {
                document.getElementById('quizFeedback').innerHTML = `
                    <div class="quiz-result">
                        <p style="color: #dc3545; font-size: 1.3em; font-weight: bold;">‚úó Incorrect</p>
                        <p style="margin-top: 10px;">The correct answer was: ${question.answers[question.correct]}</p>
                    </div>
                `;
            }
            
            document.getElementById('quizScore').textContent = `Score: ${score}/${quizQuestions.length}`;
            
            if (currentQuestion < quizQuestions.length - 1) {
                const nextBtn = document.createElement('button');
                nextBtn.className = 'next-question-btn';
                nextBtn.textContent = 'Next Question ‚Üí';
                nextBtn.onclick = () => {
                    currentQuestion++;
                    displayQuestion();
                };
                document.getElementById('quizFeedback').appendChild(nextBtn);
            } else {
                let message = '';
                const percentage = (score / quizQuestions.length) * 100;
                
                if (percentage === 100) {
                    message = "Perfect! You're a Valentine's Day expert! üíØ‚ù§Ô∏è";
                } else if (percentage >= 75) {
                    message = "Great job! You really know your romance! üíï";
                } else if (percentage >= 50) {
                    message = "Good effort! Love is all about learning! üíó";
                } else {
                    message = "Keep learning! Love is a journey! üíñ";
                }
                
                const finaleBtn = document.createElement('button');
                finaleBtn.className = 'yes-btn';
                finaleBtn.style.marginTop = '20px';
                finaleBtn.textContent = 'Experience the Cosmic Heart üååüíñ';
                finaleBtn.onclick = startCosmicFinale;
                
                const finalResult = document.createElement('div');
                finalResult.innerHTML = `
                    <p style="font-size: 1.4em; color: #e74c3c; margin-top: 20px; font-weight: bold;">
                        ${message}
                    </p>
                `;
                finalResult.appendChild(finaleBtn);
                document.getElementById('quizFeedback').appendChild(finalResult);
            }
        }

        // Start Cosmic Finale
        function startCosmicFinale() {
            document.getElementById('cosmic-finale').classList.add('active');
            initCosmicHeart();
        }
    </script>

    <script type="module">
        window.initCosmicHeart = async function() {
            try {
                const loading = document.getElementById('cosmic-loading');
                loading.textContent = 'Loading Three.js...';
                
                const THREE = await import('three');
                loading.textContent = 'Loading controls...';
                
                const { OrbitControls } = await import('three/addons/controls/OrbitControls.js');
                loading.textContent = 'Loading post-processing...';
                
                const { EffectComposer } = await import('three/addons/postprocessing/EffectComposer.js');
                const { RenderPass } = await import('three/addons/postprocessing/RenderPass.js');
                const { UnrealBloomPass } = await import('three/addons/postprocessing/UnrealBloomPass.js');
                
                loading.textContent = 'Creating scene...';

                // --- Configuration ---
                const CONFIG = {
                    particleCount: 50000,
                    auraCount: 8000,
                    explosionForce: 3.5,
                    formationSpeed: 0.025,
                    colors: {
                        inner: new THREE.Color(0x88ccff),
                        core: new THREE.Color(0xcc5577),
                        outer: new THREE.Color(0xdd8844),
                        aura: new THREE.Color(0x8866cc)
                    }
                };

                // --- Scene Setup ---
                const scene = new THREE.Scene();
                scene.fog = new THREE.FogExp2(0x010103, 0.005);

                const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
                camera.position.set(0, 0, 50);

                const renderer = new THREE.WebGLRenderer({ antialias: false, powerPreference: "high-performance" });
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                renderer.toneMapping = THREE.ReinhardToneMapping;
                document.getElementById('cosmic-finale').appendChild(renderer.domElement);

                const controls = new OrbitControls(camera, renderer.domElement);
                controls.enableDamping = true;
                controls.dampingFactor = 0.05;
                controls.enablePan = false;
                controls.maxDistance = 120;

                // --- Post Processing ---
                const composer = new EffectComposer(renderer);
                composer.addPass(new RenderPass(scene, camera));

                // --- Texture Generation ---
                function getHeartTexture() {
                    const canvas = document.createElement('canvas');
                    canvas.width = 64;
                    canvas.height = 64;
                    const ctx = canvas.getContext('2d');
                    
                    ctx.clearRect(0, 0, 64, 64);
                    ctx.translate(32, 28);
                    ctx.scale(1.5, 1.5);
                    
                    ctx.beginPath();
                    for (let t = 0; t < Math.PI * 2; t += 0.01) {
                        const x = 16 * Math.pow(Math.sin(t), 3);
                        const y = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
                        if (t === 0) {
                            ctx.moveTo(x, y);
                        } else {
                            ctx.lineTo(x, y);
                        }
                    }
                    ctx.closePath();
                    
                    const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, 20);
                    gradient.addColorStop(0, 'rgba(255, 255, 255, 1)');
                    gradient.addColorStop(0.7, 'rgba(255, 255, 255, 0.9)');
                    gradient.addColorStop(1, 'rgba(255, 255, 255, 0.3)');
                    
                    ctx.fillStyle = gradient;
                    ctx.fill();
                    
                    const texture = new THREE.Texture(canvas);
                    texture.needsUpdate = true;
                    return texture;
                }
                
                function getGasTexture() {
                    const canvas = document.createElement('canvas');
                    canvas.width = 32;
                    canvas.height = 32;
                    const ctx = canvas.getContext('2d');
                    const grad = ctx.createRadialGradient(16, 16, 0, 16, 16, 16);
                    grad.addColorStop(0, 'rgba(255, 255, 255, 1)');
                    grad.addColorStop(0.2, 'rgba(255, 255, 255, 0.8)');
                    grad.addColorStop(0.5, 'rgba(255, 255, 255, 0.1)');
                    grad.addColorStop(1, 'rgba(0, 0, 0, 0)');
                    ctx.fillStyle = grad;
                    ctx.fillRect(0, 0, 32, 32);
                    const texture = new THREE.Texture(canvas);
                    texture.needsUpdate = true;
                    return texture;
                }
                
                const particleTexture = getHeartTexture();
                const gasTexture = getGasTexture();

                // --- Heart Shape ---
                function getHeartPoint(t) {
                    const x = 16 * Math.pow(Math.sin(t), 3);
                    const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
                    return { x, y };
                }

                loading.textContent = 'Creating particles...';

                // --- Particle System ---
                function createParticleSystem(count, size, opacity, isAura) {
                    const geometry = new THREE.BufferGeometry();
                    const posArray = new Float32Array(count * 3);
                    const targetArray = new Float32Array(count * 3);
                    const colArray = new Float32Array(count * 3);
                    const velArray = new Float32Array(count * 3);

                    for(let i=0; i<count; i++) {
                        const i3 = i*3;
                        
                        const t = Math.random() * Math.PI * 2;
                        const pt = getHeartPoint(t);
                        
                        const layer = Math.pow(Math.random(), 0.5);
                        const spread = isAura ? 3 : 1.2;
                        const angle = Math.random() * Math.PI * 2;
                        const r = layer * spread;
                        
                        const tx = pt.x + Math.cos(angle) * r;
                        const ty = pt.y + Math.sin(angle) * r;
                        const tz = (Math.random() - 0.5) * (isAura ? 6 : 3);

                        targetArray[i3] = tx;
                        targetArray[i3+1] = ty;
                        targetArray[i3+2] = tz;

                        let c;
                        if (isAura) {
                            c = CONFIG.colors.aura;
                        } else {
                            const dist = Math.sqrt(tx*tx + ty*ty);
                            if (dist < 5) {
                                c = CONFIG.colors.inner;
                            } else if (dist < 12) {
                                c = CONFIG.colors.core;
                            } else {
                                c = CONFIG.colors.outer;
                            }
                        }

                        posArray[i3] = (Math.random() - 0.5) * 300;
                        posArray[i3+1] = (Math.random() - 0.5) * 300;
                        posArray[i3+2] = (Math.random() - 0.5) * 300;

                        colArray[i3] = c.r;
                        colArray[i3+1] = c.g;
                        colArray[i3+2] = c.b;

                        velArray[i3] = 0;
                        velArray[i3+1] = 0;
                        velArray[i3+2] = 0;
                    }

                    geometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
                    geometry.setAttribute('target', new THREE.BufferAttribute(targetArray, 3));
                    geometry.setAttribute('color', new THREE.BufferAttribute(colArray, 3));
                    geometry.setAttribute('velocity', new THREE.BufferAttribute(velArray, 3));

                    const material = new THREE.PointsMaterial({
                        size: size,
                        map: isAura ? gasTexture : particleTexture,
                        vertexColors: true,
                        blending: THREE.AdditiveBlending,
                        depthWrite: false,
                        transparent: true,
                        opacity: opacity
                    });

                    const mesh = new THREE.Points(geometry, material);
                    return { mesh, geometry, material };
                }

                const mainHeart = createParticleSystem(CONFIG.particleCount, 0.8, 0.85, false);
                scene.add(mainHeart.mesh);

                const auraHeart = createParticleSystem(CONFIG.auraCount, 1.2, 0.25, true);
                scene.add(auraHeart.mesh);

                // --- Background Stars ---
                function createBackground() {
                    const geo = new THREE.BufferGeometry();
                    const pos = [];
                    for(let i=0; i<2000; i++) {
                        pos.push((Math.random()-0.5)*400, (Math.random()-0.5)*400, (Math.random()-0.5)*400);
                    }
                    geo.setAttribute('position', new THREE.Float32BufferAttribute(pos, 3));
                    const mat = new THREE.PointsMaterial({ color: 0x8888aa, size: 0.5, transparent: true, opacity: 0.5 });
                    const stars = new THREE.Points(geo, mat);
                    scene.add(stars);
                }
                createBackground();

                loading.style.display = 'none';

                // Romantic phrases
                const phrases = [
                    "I love you ‚ù§Ô∏è",
                    "You're my world üåç",
                    "Forever yours üíï",
                    "My everything üíñ",
                    "You complete me üíó",
                    "Always & forever ‚ôæÔ∏è",
                    "My soulmate üë´",
                    "You're amazing ‚ú®",
                    "My heart beats for you üíì",
                    "Together forever üíë"
                ];

                // --- Interaction ---
                const raycaster = new THREE.Raycaster();
                const mouse = new THREE.Vector2();
                let hasExploded = false;
                
                window.addEventListener('pointerdown', (e) => {
                    if (!hasExploded) {
                        document.getElementById('cosmic-ui').style.opacity = '0';
                        explode(mainHeart.geometry);
                        explode(auraHeart.geometry);
                        hasExploded = true;
                        
                        mainHeart.material.size = 1.5;
                        auraHeart.material.size = 2.0;
                    } else {
                        mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
                        mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
                        
                        raycaster.setFromCamera(mouse, camera);
                        const intersects = raycaster.intersectObject(mainHeart.mesh);
                        
                        if (intersects.length > 0) {
                            const intersection = intersects[0];
                            const index = intersection.index;
                            
                            const positions = mainHeart.geometry.attributes.position.array;
                            const i3 = index * 3;
                            positions[i3] = 9999;
                            positions[i3 + 1] = 9999;
                            positions[i3 + 2] = 9999;
                            mainHeart.geometry.attributes.position.needsUpdate = true;
                            
                            const phrase = phrases[Math.floor(Math.random() * phrases.length)];
                            const floatingText = document.createElement('div');
                            floatingText.className = 'floating-text';
                            floatingText.textContent = phrase;
                            floatingText.style.left = e.clientX + 'px';
                            floatingText.style.top = e.clientY + 'px';
                            document.body.appendChild(floatingText);
                            
                            setTimeout(() => {
                                floatingText.remove();
                            }, 3000);
                        }
                    }
                });

                function explode(geo) {
                    const pos = geo.attributes.position.array;
                    const vel = geo.attributes.velocity.array;
                    
                    for(let i=0; i<pos.length/3; i++) {
                        const i3 = i*3;
                        const x = pos[i3];
                        const y = pos[i3+1];
                        const z = pos[i3+2];
                        
                        let len = Math.sqrt(x*x + y*y + z*z) || 1;
                        
                        const force = Math.random() * 0.5 + 0.2;
                        vel[i3] += (x/len) * force;
                        vel[i3+1] += (y/len) * force;
                        vel[i3+2] += (z/len) * force;
                        
                        vel[i3] += (Math.random() - 0.5) * 0.3;
                        vel[i3+1] += (Math.random() - 0.5) * 0.3;
                        vel[i3+2] += (Math.random() - 0.5) * 0.3;
                    }
                }

                // --- Animation ---
                const clock = new THREE.Clock();
                    
                function animateSystem(system, time) {
                    const positions = system.geometry.attributes.position.array;
                    const targets = system.geometry.attributes.target.array;
                    const velocities = system.geometry.attributes.velocity.array;

                    for(let i=0; i < positions.length/3; i++) {
                        const i3 = i*3;

                        positions[i3]   += velocities[i3];
                        positions[i3+1] += velocities[i3+1];
                        positions[i3+2] += velocities[i3+2];

                        if (hasExploded) {
                            velocities[i3]   *= 0.995;
                            velocities[i3+1] *= 0.995;
                            velocities[i3+2] *= 0.995;
                            
                            velocities[i3]   += (Math.random() - 0.5) * 0.01;
                            velocities[i3+1] += (Math.random() - 0.5) * 0.01;
                            velocities[i3+2] += (Math.random() - 0.5) * 0.01;
                        } else {
                            velocities[i3]   *= 0.98;
                            velocities[i3+1] *= 0.98;
                            velocities[i3+2] *= 0.98;
                        }

                        const tx = targets[i3];
                        const ty = targets[i3+1];
                        const tz = targets[i3+2];

                        const breath = Math.sin(time * 1.5 + tx*0.1) * 0.5;

                        if (!hasExploded && Math.abs(velocities[i3]) < 0.1) {
                            positions[i3]   += (tx - positions[i3]) * CONFIG.formationSpeed;
                            positions[i3+1] += (ty - positions[i3+1]) * CONFIG.formationSpeed;
                            positions[i3+2] += ((tz + breath) - positions[i3+2]) * CONFIG.formationSpeed;
                        }
                    }
                    system.geometry.attributes.position.needsUpdate = true;
                    
                    if (!hasExploded) {
                        system.mesh.rotation.y = Math.sin(time * 0.2) * 0.15;
                    }
                }

                function animate() {
                    requestAnimationFrame(animate);
                    
                    const time = clock.getElapsedTime();
                    
                    animateSystem(mainHeart, time);
                    animateSystem(auraHeart, time);

                    controls.update();
                    composer.render();
                }

                window.addEventListener('resize', () => {
                    camera.aspect = window.innerWidth / window.innerHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(window.innerWidth, window.innerHeight);
                    composer.setSize(window.innerWidth, window.innerHeight);
                });

                animate();
                
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('cosmic-loading').textContent = 'Error loading cosmic heart: ' + error.message;
            }
        };
    </script>
</body>
</html>
